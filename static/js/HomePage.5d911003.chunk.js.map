{"version":3,"file":"static/js/HomePage.5d911003.chunk.js","mappings":"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","sources":["components/PieChart/PieChart.js","components/LineChart/LineChart.js","webpack://client/./src/pages/Home/Home.module.css?1370","pages/Home/Home.js","services/categories.js","services/product.js","services/user.js","services/common.js"],"sourcesContent":["import React from \"react\";\nimport Highcharts from \"highcharts/highstock\";\nimport HighchartsReact from \"highcharts-react-official\";\nimport HC_more from 'highcharts/highcharts-more';\n\nHC_more(Highcharts);\n\nconst PieChart = ({data}) => {\n    const options = {\n        chart: {\n            plotBackgroundColor: null,\n            plotBorderWidth: null,\n            plotShadow: false,\n            type: 'pie'\n        },\n        title: {\n            text: 'Money invested in FPV-World'\n        },\n        tooltip: {\n            pointFormat: '{series.name}: <b>{point.y:.1f} UAN</b>'\n        },\n        accessibility: {\n            point: {\n                valueSuffix: '%'\n            }\n        },\n        credits:{\n            enabled: false\n        },\n        plotOptions: {\n            pie: {\n                allowPointSelect: true,\n                cursor: 'pointer',\n            }\n        },\n        series: [{\n            name: 'Money',\n            colorByPoint: true,\n            data: [...data]\n        }]\n    }\n\n    return (\n       <div>\n          <HighchartsReact highcharts={Highcharts} options={options}/>\n       </div>\n    )\n};\n\nexport default PieChart;\n\n\n","import Highcharts from \"highcharts\";\nimport HighchartsReact from \"highcharts-react-official\";\nimport HighchartsMore from \"highcharts/highcharts-more\";\nimport Boost from \"highcharts/modules/boost\";\n\nHighchartsMore(Highcharts);\nBoost(Highcharts);\n\nconst LineChart = ({data}) => {\n    const options = {\n        boost: {\n            useGPUTranslations: true,\n            usePreallocated: true,\n        },\n        chart: {\n            type: 'spline'\n        },\n        title: {\n            text: 'Monthly money investing'\n        },\n        credits:{\n          enabled: false\n        },\n        xAxis: {\n            labels: {\n                enabled: false,\n            },\n            crosshair: true,\n            tickWidth: 0,\n            min: 0,\n            tickInterval: 1,\n            maxPadding: 0,\n        },\n        yAxis: {\n            title: {\n                text: 'Money'\n            },\n            labels: {\n                formatter: function () {\n                    return this.value;\n                }\n            }\n        },\n        tooltip: {\n            crosshairs: true,\n            headerFormat: `<b>{series.name}</b><br/>`,\n            pointFormatter: function () {\n                return `${this.date}<br/>${this.y}UAN`;\n            }\n            },\n        plotOptions: {\n            spline: {\n                marker: {\n                    radius: 4,\n                    lineColor: '#666666',\n                    lineWidth: 1\n                }\n            }\n        },\n        series: [...data]\n    }\n  return(\n      <HighchartsReact\n          highcharts={Highcharts}\n          options={options}\n      />\n\n  )\n}\n\nexport default LineChart;","// extracted by mini-css-extract-plugin\nexport default {\"loaderWrapper\":\"Home_loaderWrapper__mT37B\",\"moneyWrapper\":\"Home_moneyWrapper__FKkM8\"};","import {useNavigate} from 'react-router-dom';\nimport React, {useEffect, useState} from \"react\";\nimport PieChart from \"../../components/PieChart\";\nimport LineChart from \"../../components/LineChart\";\nimport Loader from \"react-loader-spinner\";\nimport s from './Home.module.css';\nimport {toast} from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport {userApi, commonApi} from \"../../services\";\nimport moment from \"moment/moment\";\n\ntoast.configure();\n\nconst Home = ({isLoggedIn}) => {\n    const navigate = useNavigate();\n\n    const [data, setData] = useState([]);\n    const [lineChartData, setLineChartData] = useState([]);\n    const [from, setFrom] = useState(\"usd\");\n    const [to, setTo] = useState('uah');\n    const [output, setOutput] = useState(0);\n    const [dollars, setDollars] = useState(0);\n    const [loading, setLoading] = useState(false);\n    const [mounted, setMounted] = useState(false);\n\n    const reducer = (previousValue, currentValue) => previousValue + currentValue;\n\n    useEffect(()=>{\n        if (!isLoggedIn){\n            navigate('/login')\n        }\n    },[isLoggedIn]);\n\n    useEffect(()=>{\n        fetchUsers();\n        return () => {\n            setMounted(true);\n        }\n    },[])\n\n\n    useEffect(()=>{\n        if (dollars > 0){\n            fetchMoney();\n        }\n    },[dollars])\n    const fetchMoney = async () => {\n        try {\n            const money = await commonApi.convertMoney(from);\n            const rate = money.usd[to];\n            setOutput(Math.round(dollars * rate));\n        }catch (e) {\n            toast.error('Convert service does not respond', {\n                position:'top-center'\n            })\n        }\n    }\n    const fetchUsers = async () => {\n        try {\n            setLoading(true);\n            const response = await userApi.getAllUsers();\n            const usd = await commonApi.getCashFlow();\n            setDollars(Math.round(usd));\n            setLineChartData([...response].map(el=>{\n                return{\n                    name:el.login,\n                    data:[...el.money].map(pr=>{\n                        return {\n                            y:pr.count,\n                            date: moment(pr.time).format('DD-MM-YYYY')\n                        }\n                    })\n                }\n            }))\n            setData([...response].map(el=>{\n                const arr = el.money.map(el=>el.count);\n                const sum = arr.length > 0 ? arr.reduce(reducer): 0;\n                return {\n                   name:el.login,\n                    y: sum\n                }\n            }))\n            setLoading(false);\n        }catch (e) {\n            setLoading(false);\n            toast.error(e.response.data.message, {\n                position:'top-center'\n            })\n        }\n    }\n\n    return(\n        <div>\n            {\n                !loading && <div className={s.moneyWrapper} >\n                    <h2>Money USD:{dollars}</h2>\n                    <h2>Money UAN: {output}</h2>\n                </div>\n            }\n            {\n                data.length > 0 && !loading && <PieChart data={data}/>\n            }\n            {\n                data.length > 0 && !loading && <LineChart data={lineChartData}/>\n            }\n            {\n                loading && <div className={s.loaderWrapper}>\n                    <Loader type=\"Bars\" color=\"#ff8614\" height={200} width={200} />\n                </div>\n            }\n        </div>\n    )\n}\n\nexport default Home;","import axios from \"axios\";\n\nconst token = {\n    set(token) {\n        axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n    },\n    unset() {\n        axios.defaults.headers.common.Authorization = \"\";\n    },\n};\n\nconst addCategory = (name) => {\n    return axios.post(`/Catigories/add/${name}`).then(({data}) => data);\n}\n\nconst removeCategory = (id) => {\n    return axios.delete(`/Catigories/delete/${id}`)\n}\n\nconst editCategory = (newName, id) => {\n    return axios.post(`Catigories/changeName/${id}?newName=${newName}`)\n        .then(({data})=>data);\n}\n\nconst getCategories = () => {\n    return axios.get('/Catigories/GetAll').then(({data})=>data);\n}\n\nconst categoriesApi = {\n    addCategory,\n    removeCategory,\n    editCategory,\n    getCategories\n}\n\nexport default categoriesApi;","import axios from \"axios\";\n\nconst token = {\n    set(token) {\n        axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n    },\n    unset() {\n        axios.defaults.headers.common.Authorization = \"\";\n    },\n};\n\nconst addProduct = (product) => {\n    return axios.post('/Product/add', product).then(({data})=> data);\n}\n\nconst deleteProduct = (id) => {\n    return axios.delete(`/Product/delete/${id}`);\n}\n\nconst getProducts = (state) => {\n    return axios.get(`/Product/GetAll?state=${state}`).then(({data})=> data);\n}\n\nconst changeProductName = (id, name) => {\n    return axios.post(`Product/changeProductName/${id}?name=${name}`).then(({data})=> data);\n}\n\nconst changeProductCategory = (id, categoryName) => {\n    return axios.post(`Product/moveToCategory/${id}?categoryName=${categoryName}`).then(({data})=> data);\n}\n\nconst changeSellingPrice = (id, price) => {\n    return axios.post(`Product/addSallingPrice/${id}?price=${price}`).then(({data})=> data);\n}\n\nconst addArrivalDate = (id, date) => {\n    return axios.post(`Product/addArrivalDate/${id}?time=${date}`).then(({data})=> data);\n}\n\nconst addSellingDate = (id, date) => {\n    return axios.post(`Product/addSallingDate/${id}?time=${date}`).then(({data})=> data);\n}\n\nconst productsApi = {\n    addProduct,\n    deleteProduct,\n    getProducts,\n    changeProductName,\n    changeProductCategory,\n    changeSellingPrice,\n    addArrivalDate,\n    addSellingDate\n}\n\nexport default productsApi;","import axios from \"axios\";\n\nconst token = {\n    set(token) {\n        axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n    },\n    unset() {\n        axios.defaults.headers.common.Authorization = \"\";\n    },\n};\n\nconst userRegister = (user) => {\n    return axios.post('/User/register', user).then(({data})=> data);\n}\n\nconst userLogin = (user) => {\n    return axios.post('/User/login', user).then(({data})=>{\n        token.set(data.token);\n        return data;\n    });\n}\n\nconst deleteUser = (id) => {\n    return axios.delete(`/User/delete/${id}`).then(({data})=>data);\n}\n\nconst addUserCash = (cash, id) => {\n    return axios.post(`/User/addcashformonth/${id}`, cash).then(({data})=> data);\n}\n\nconst getAllUserMoney = (id) => {\n    return axios.get(`User/getAllUserMoney/${id}`).then(({data})=> data);\n}\n\nconst getAllUsers = () => {\n    return axios.get('User/getAllUsers').then(({data})=> data);\n}\n\nconst editLogin = (id,login) => {\n    return axios.post(`User/editLogin/${id}?newLogin=${login}`).then(({data})=> data);\n}\n\nconst usersApi = {\n    userRegister,\n    userLogin,\n    deleteUser,\n    addUserCash,\n    getAllUserMoney,\n    getAllUsers,\n    editLogin\n}\n\nexport default usersApi;","import axios from \"axios\";\n\nconst generateExel = () => {\n    return axios.get('/Common/generateExcel').then(({data}) => data);\n}\n\nconst getCashFlow = () => {\n    return axios.get('/Common/chashFlow').then(({data}) => data);\n}\n\nconst convertMoney = (from) => {\n    return axios.get(`https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/latest/currencies/${from}.json`)\n        .then(({data}) => data);\n}\n\nconst commonApi = {\n    generateExel,\n    getCashFlow,\n    convertMoney\n}\n\nexport default commonApi;"],"names":["HC_more","Highcharts","data","options","chart","plotBackgroundColor","plotBorderWidth","plotShadow","type","title","text","tooltip","pointFormat","accessibility","point","valueSuffix","credits","enabled","plotOptions","pie","allowPointSelect","cursor","series","name","colorByPoint","highcharts","HighchartsMore","Boost","boost","useGPUTranslations","usePreallocated","xAxis","labels","crosshair","tickWidth","min","tickInterval","maxPadding","yAxis","formatter","this","value","crosshairs","headerFormat","pointFormatter","date","y","spline","marker","radius","lineColor","lineWidth","toast","isLoggedIn","navigate","useNavigate","useState","setData","lineChartData","setLineChartData","from","to","output","setOutput","dollars","setDollars","loading","setLoading","setMounted","reducer","previousValue","currentValue","useEffect","fetchUsers","fetchMoney","commonApi","money","rate","usd","Math","round","position","userApi","response","map","el","login","pr","count","moment","time","format","arr","sum","length","reduce","message","className","s","color","height","width","addCategory","axios","then","removeCategory","id","editCategory","newName","getCategories","productsApi","addProduct","product","deleteProduct","getProducts","state","changeProductName","changeProductCategory","categoryName","changeSellingPrice","price","addArrivalDate","addSellingDate","token","usersApi","userRegister","user","userLogin","deleteUser","addUserCash","cash","getAllUserMoney","getAllUsers","editLogin","generateExel","getCashFlow","convertMoney"],"sourceRoot":""}