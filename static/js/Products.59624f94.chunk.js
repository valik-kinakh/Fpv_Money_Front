"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[326],{9087:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var r=t(1413),s=t(2982),c=t(5861),a=t(885),i=t(7757),u=t.n(i),l="Products_wrapper__aniuN",d="Products_loaderWrapper__cHCzJ",o="Products_selectWrapper__AtyoL",h="Products_select__NVaeX",p="Products_warning__Ty0bg",f="Products_moneyInfo__Qmsps",x="Products_optionsWrapper__NkICO",Z=t(6871),g=t(2791),j=t(8909),m=t(7751),_=t(4477),v=t(1603),N=t(3915),P=t(3767),S=t(4554),k=t(6960),w=(t(5462),t(7175)),y=t(5795),C=t(3660),b=t(6153),I=t(2426),A=t.n(I),E=t(4037),F=t(9891),M=t(184);k.Am.configure();var O=function(e,n){return e+n},T=function(e){var n=e.isLoggedIn,t=(0,Z.s0)(),i=(0,g.useState)([]),I=(0,a.Z)(i,2),T=I[0],W=I[1],D=(0,g.useState)([]),L=(0,a.Z)(D,2),z=L[0],B=L[1],H=(0,g.useState)([]),J=(0,a.Z)(H,2),Q=J[0],V=J[1],X=(0,g.useState)(!1),q=(0,a.Z)(X,2),G=q[0],K=q[1],R=(0,g.useState)(!1),U=(0,a.Z)(R,2),Y=(U[0],U[1]),$=(0,g.useState)([null,null]),ee=(0,a.Z)($,2),ne=ee[0],te=ee[1],re=(0,g.useState)(0),se=(0,a.Z)(re,2),ce=se[0],ae=se[1];(0,g.useEffect)((function(){n||t("/login")}),[n]),(0,g.useEffect)((function(){return K(!0),ie().then((function(){K(!1)})),function(){Y(!0)}}),[ce]),(0,g.useEffect)((function(){ie()}),[ne]);var ie=function(){var e=(0,c.Z)(u().mark((function e(){var n,t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.fi.getProducts({state:ce,startDate:ne[0]?A()(ne[0]).toISOString():null,endDate:ne[1]?A()(ne[1]).toISOString():null});case 3:n=e.sent,W(n),t=(0,s.Z)(n).map((function(e){return e.price.purchasePrice})),r=(0,s.Z)(n).map((function(e){return e.price.sallingPrice?e.price.sallingPrice-e.price.purchasePrice:0})),B(r),V(t),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),k.Am.error(e.t0.response.data.message,{position:"top-center"});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return(0,M.jsx)(j.Z,{children:G?(0,M.jsx)("div",{className:d,children:(0,M.jsx)(b.Z,{type:"Bars",color:"#ff8614",height:200,width:200})}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:x,children:[(0,M.jsxs)("div",{className:o,children:[(0,M.jsx)("p",{children:"Filter: "}),(0,M.jsx)(E.Z,{onChange:function(e){ae(e.target.value)},value:ce,className:h,children:C.Z.map((function(e){return(0,M.jsx)(F.Z,{value:e.id,children:e.name},e.id)}))})]}),(0,M.jsx)("div",{className:o,children:(0,M.jsx)(N.Z,{dateAdapter:m.Z,children:(0,M.jsx)(P.Z,{spacing:3,children:(0,M.jsx)(_.Z,{startText:"Start date",endText:"End date",clearable:!0,value:ne,disableFuture:!0,onChange:function(e){te(e)},renderInput:function(e,n){return(0,M.jsxs)(g.Fragment,{children:[(0,M.jsx)(v.Z,(0,r.Z)({},e)),(0,M.jsx)(S.Z,{sx:{mx:2},children:" to "}),(0,M.jsx)(v.Z,(0,r.Z)({},n))]})}})})})})]}),(0,M.jsxs)("div",{className:f,children:[(0,M.jsxs)("h2",{children:["Money spend: ",Q.length>0?Math.round(Q.reduce(O)):0]}),(0,M.jsxs)("h2",{children:["Money earned: ",z.length>0?Math.round(z.reduce(O)):0]})]}),(0,M.jsx)("div",{className:l,children:T.length>0&&T.map((function(e){return(0,M.jsx)(y.Z,{product:e,fetchCategories:ie},e.id)}))}),!G&&0===T.length&&(0,M.jsx)("div",{className:p,children:(0,M.jsx)("p",{children:"No items found"})})]})})}}}]);
//# sourceMappingURL=Products.59624f94.chunk.js.map